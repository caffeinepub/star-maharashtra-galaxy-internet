{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-12T05:14:10.393Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 3,
    "implemented": 2,
    "items": [
      {
        "id": "REQ-20",
        "summary": "Fix the backend `resetAdminSetupCode()` behavior so the Admin Setup Code reset flow can succeed for the legitimate admin user even when they are currently not recognized as admin by permission checks (i.e., they cannot access admin-only APIs because the setup code is missing/invalid). The backend must still prevent unauthorized users from resetting the admin setup code.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-21",
        "summary": "Update the Admin Panel recovery UI to show clear, actionable error messaging when Admin Setup Code reset fails (for example, due to being signed in with the wrong Internet Identity), including instructions in English to sign out and sign back in with the correct admin Internet Identity and then retry.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/features/admin/AdminPanel.tsx",
          "frontend/src/features/admin/components/AdminAccessRecoveryCard.tsx"
        ],
        "matchedFiles": [
          "frontend/src/features/admin/AdminPanel.tsx",
          "frontend/src/features/admin/components/AdminAccessRecoveryCard.tsx"
        ]
      },
      {
        "id": "REQ-22",
        "summary": "Ensure the reset success path reliably re-initializes admin access after the new Admin Setup Code is generated by: (1) storing it under `sessionStorage` key `caffeineAdminToken`, (2) re-initializing access control, and (3) refreshing admin-related React Query state so the Admin Panel unlocks without a manual page refresh.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/features/admin/hooks/useAdminSetupCode.ts",
          "frontend/src/features/admin/AdminPanel.tsx"
        ],
        "matchedFiles": [
          "frontend/src/features/admin/hooks/useAdminSetupCode.ts",
          "frontend/src/features/admin/AdminPanel.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/features/admin/AdminPanel.tsx",
    "frontend/src/features/admin/components/AdminAccessRecoveryCard.tsx",
    "frontend/src/features/admin/hooks/useAdminSetupCode.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}